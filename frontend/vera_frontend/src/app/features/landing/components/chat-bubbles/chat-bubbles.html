<!-- Message utilisateur -->
@if (message.role === 'user') {
  <div class="flex justify-end mb-4">
    <div class="relative max-w-[60%]">
      <!-- Bulle -->
      <div class="bg-neutral-beige-50 rounded-tl-[40px] rounded-tr-[25px] rounded-br-none rounded-bl-[50px] shadow-[2px_2px_0px_2px_rgba(0,0,0,0.70)] pl-10 pr-2 py-6">
        <p class="text-stone-700 text-sm wrap-break-word">{{ message.content }}</p>
      </div>
    </div>
  </div>
}

<!-- Message assistant -->
@if (message.role === 'assistant') {
  <div class="flex justify-start mb-6">
    <div class="max-w-full w-full">
      
      @if (message.isLoading) {
        <!-- État de chargement -->
        <div class="flex items-center gap-2 text-stone-400">
          <div class="flex gap-1">
            <span class="w-2 h-2 bg-stone-400 rounded-full animate-bounce"></span>
            <span class="w-2 h-2 bg-stone-400 rounded-full animate-bounce [animation-delay:0.1s]"></span>
            <span class="w-2 h-2 bg-stone-400 rounded-full animate-bounce [animation-delay:0.2s]"></span>
          </div>
        </div>
      } @else {
        <!-- Information véridique -->
        <h2 class="text-2xl font-serif text-stone-800 mb-3">
          Information <span class="underline decoration-primary-green-300 decoration-4 underline-offset-4">véridique</span>
        </h2>
        
        <!-- Confiance -->
        <p class="text-stone-600 text-sm mb-1">
          Confiance de Vera : <span class="bg-primary-green-100 text-stone-800 px-2 py-0.5 rounded-md font-medium">90%</span>
        </p>
        
        <!-- Sources count -->
        <p class="text-stone-600 text-sm mb-6">
          Cette information est exact, selon 
          <span class="bg-primary-green-100 text-stone-800 px-2 py-0.5 rounded-md">2 sources</span> 
          en 
          <span class="bg-primary-green-100 text-stone-800 px-2 py-0.5 rounded-md">2025</span>
        </p>
        
        <!-- Résumé factuel -->
        <h3 class="text-xl font-serif text-stone-800 mb-2">
          Résumé <span class="underline decoration-primary-green-300 decoration-4 underline-offset-4">factuel</span>
        </h3>
        <p class="text-stone-600 text-sm leading-relaxed mb-6">
          {{ message.content }}
        </p>
        
        <!-- Les sources fiables -->
        <h3 class="text-xl font-serif text-stone-800 mb-3">
          Les sources <span class="underline decoration-primary-green-300 decoration-4 underline-offset-4">fiables</span>
        </h3>
        
        <!-- Liste des sources -->
        <div class="space-y-3">
          <!-- Source 1 -->
          <a href="#" class="flex items-center gap-3 p-3 bg-white rounded-xl border border-stone-200 hover:border-stone-300 transition-colors">
            <div class="w-12 h-12 bg-stone-200 rounded-lg shrink-0 overflow-hidden">
              <img src="assets/images/placeholder-source.png" alt="" class="w-full h-full object-cover"/>
            </div>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium text-stone-800 line-clamp-2">« Le Journal d'un prisonnier » : Nicolas Sarkozy, à peine sorti de prison, annonce la...</p>
              <p class="text-xs text-stone-400 mt-0.5">Le Monde, 2025</p>
            </div>
          </a>
          
          <!-- Source 2 -->
          <a href="#" class="flex items-center gap-3 p-3 bg-white rounded-xl border border-stone-200 hover:border-stone-300 transition-colors">
            <div class="w-12 h-12 bg-stone-200 rounded-lg shrink-0 overflow-hidden">
              <img src="assets/images/placeholder-source.png" alt="" class="w-full h-full object-cover"/>
            </div>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium text-stone-800 line-clamp-2">Nicolas Sarkozy conservera-t-il ses avantages d'ancien président en prison ?</p>
              <p class="text-xs text-stone-400 mt-0.5">20 minutes, 2025</p>
            </div>
          </a>
        </div>
      }
    </div>
  </div>
}